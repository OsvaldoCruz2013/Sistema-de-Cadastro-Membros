document.getElementById("loginForm").addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("usuario").value,o=document.getElementById("senha").value;try{const e=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:t,senha:o})});if(e.ok)localStorage.setItem("logado","true"),window.location.href="cadastro.html";else{const t=await e.text();document.getElementById("erroLogin").textContent=t||"Usuário ou senha inválidos."}}catch(e){document.getElementById("erroLogin").textContent="Erro ao conectar com o servidor.",console.error(e)}});